[supervisord]
; nodaemon: true 确保在容器中前台运行，否则容器会立即退出
nodaemon=true
loglevel=info

; --- 1Panel 核心服务 ---
[program:1panel-core]
command=/usr/bin/1panel-core
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

; --- 1Panel 代理服务 ---
[program:1panel-agent]
command=/usr/bin/1panel-agent
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

; --- SSH 服务 ---
[program:sshd]
; -D 参数确保 SSHD 在前台运行
command=/usr/sbin/sshd -D
autorestart=true
; 仅在调试SSH连接问题时开启日志，通常不需要
; stdout_logfile=/var/log/supervisor/sshd.log
; stderr_logfile=/var/log/supervisor/sshd.err

; --- Alist 服务 ---
[program:alist]
; 这里指向我们在 Dockerfile 中创建的包装脚本，用于处理初始密码
command=/opt/alist/start.sh
; 指定工作目录，确保 data 目录生成在正确位置
directory=/opt/alist
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
